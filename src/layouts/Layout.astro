---
import '../styles/global.css';
import '../styles/layout.css';
import '../styles/components.css';
import '../styles/blog.css';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Travis Example - Personal Site</title>
    <!-- Prevent flash by applying theme immediately -->
    <script is:inline>
      // Get theme from localStorage or use gruvbox as default
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
      } else {
        document.documentElement.setAttribute('data-theme', 'gruvbox');
      }
    </script>
  </head>
  <body>
    <header>
      <h1>Your Full Name</h1>
      <p>Senior IT Security Administrator</p>
      <nav>
        <a href="/">Home</a>
        <a href="/#about">About</a>
        <a href="/#expertise">Expertise</a>
        <a href="/#projects">Projects</a>
        <a href="/blog/">Security Blog</a>
        <a href="/#contact">Contact</a>
      </nav>
    </header>
    <slot />
    <footer>
      <label for="theme-select">Theme:</label>
      <select id="theme-select">
        <option value="system">System</option>
        <option value="light">Solarized Light</option>
        <option value="dark">Solarized Dark</option>
        <option value="dracula">Dracula</option>
        <option value="gruvbox">Gruvbox Dark</option>
      </select>
    </footer>
    <script>
      const select = document.getElementById('theme-select');
      const root = document.documentElement;
      function setTheme(theme) {
        if (theme === 'system') {
          localStorage.removeItem('theme');
          if (window.matchMedia('(prefers-color-scheme: dark)').matches) root.setAttribute('data-theme', 'gruvbox');
          else root.setAttribute('data-theme', 'gruvbox');
        } else {
          root.setAttribute('data-theme', theme);
          localStorage.setItem('theme', theme);
        }
      }
      select.addEventListener('change', e => setTheme(e.target.value));
      // On load, set theme from localStorage or default to gruvbox
      const saved = localStorage.getItem('theme');
      if (saved) {
        setTheme(saved);
        select.value = saved;
      } else {
        setTheme('gruvbox');
        select.value = 'gruvbox';
      }
      // Listen for system theme changes if "system" is selected
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (select.value === 'system') setTheme('system');
      });
    </script>
  </body>
</html>
