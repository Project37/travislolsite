---
/**
 * Main Layout Component
 * 
 * This is the primary layout for the security professional portfolio site.
 * It provides:
 * - Theme management with persistent user preferences
 * - SEO optimization
 * - Responsive navigation
 * - Consistent header and footer
 * 
 * @component
 */

// Import all CSS files for site-wide styles
import '../styles/global.css';  // Theme variables and global styles
import '../styles/layout.css';  // Layout structure styles
import '../styles/components.css';  // Component-specific styles
import '../styles/blog.css';  // Blog-specific styles

// Import site configuration
import siteConfig from '../config/site.js';
import ScrollToTop from '../components/ScrollToTop.astro';
import ThemeSwitcher from '../components/ThemeSwitcher.astro';
import { Icon } from 'astro-iconify'; // Added import for Icon component

// Define the interface for props
interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
}

// Destructure props with defaults from site config
const { 
  title = siteConfig.siteName, 
  description = siteConfig.siteDescription,
  ogImage = siteConfig.ogImage
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- SEO Meta Tags -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="author" content={siteConfig.author.name} />
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:url" content={siteConfig.siteUrl} />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <!-- Prevent flash by applying theme immediately -->
    <script is:inline>
      // Apply the saved theme or default to prevent flash of unstyled content
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
    </script>
  </head>
  <body>
    <header>
      <div class="word-cloud-background">
        <span>Security</span>
        <Icon name="carbon:enterprise" />
        <span>Enterprise</span>
        <Icon name="tabler:shield-code" />
        <span>Threat</span>
        <Icon name="tabler:binary-tree" />
        <span>Compliance</span>
        <Icon name="carbon:fingerprint-recognition" />
        <span>Digital</span>
        <Icon name="tabler:building-arch" /> <!-- Was tabler:home -->
        <span>Architecture</span>
        <Icon name="tabler:certificate" />
        <span>Mitigation</span>
        <Icon name="mdi:lan" />
        <span>Network</span>
        <Icon name="mdi:shield-alert" />
        <span>Identity</span>
        <Icon name="carbon:analytics" /> <!-- Was carbon:home -->
        <span>Access</span>
        <Icon name="mdi:cloud-lock" />
        <span>Incident Response</span>
        <Icon name="mdi:chip" />
        <span>Proactive</span>
        <Icon name="tabler:user-shield" />
        <span>Prevention</span>
        <Icon name="tabler:alert-triangle" />
        <span>Monitoring</span>
        <Icon name="mdi:key" />
        <span>Protect</span>
        <span>Frameworks</span>
        <Icon name="tabler:tools" />
        <span>Technology</span>
        <span>Cybersecurity</span>
        <Icon name="tabler:shield-lock" />
        <span>Defense</span>
        <span>Vulnerability</span>
        <span>Risk</span>
        <span>Audit</span>
        <span>Controls</span>
        <span>Secure</span>
      </div>
      <h1>{siteConfig.siteName}</h1>
      <p>Senior IT Security Administrator</p>
      <nav>
        <a href="/">Home</a>
        <a href="/#about">About</a>
        <a href="/#expertise">Expertise</a>
        <a href="/#projects">Projects</a>
        <a href="/blog/">Security Blog</a>
        <a href="/bracket-examples/">Bracket Styles</a>
        <a href="/#contact">Contact</a>
      </nav>
    </header>

    <main>
      <slot /> <!-- Page content will be injected here -->
    </main>

    <footer>
      <div class="word-cloud-background">
        <span>Security</span>
        <Icon name="carbon:enterprise" />
        <span>Enterprise</span>
        <Icon name="tabler:shield-code" />
        <span>Threat</span>
        <Icon name="tabler:binary-tree" />
        <span>Compliance</span>
        <Icon name="carbon:fingerprint-recognition" />
        <span>Digital</span>
        <Icon name="tabler:building-arch" />
        <span>Architecture</span>
        <Icon name="tabler:certificate" />
        <span>Mitigation</span>
        <Icon name="mdi:lan" />
        <span>Network</span>
        <Icon name="mdi:shield-alert" />
        <span>Identity</span>
        <Icon name="carbon:analytics" />
        <span>Access</span>
        <Icon name="mdi:cloud-lock" />
        <span>Incident Response</span>
        <Icon name="mdi:chip" />
        <span>Proactive</span>
        <Icon name="tabler:user-shield" />
        <span>Prevention</span>
        <Icon name="tabler:alert-triangle" />
        <span>Monitoring</span>
        <Icon name="mdi:key" />
        <span>Protect</span>
        <span>Frameworks</span>
        <Icon name="tabler:tools" />
        <span>Technology</span>
        <span>Cybersecurity</span>
        <Icon name="tabler:shield-lock" />
        <span>Defense</span>
        <span>Vulnerability</span>
        <span>Risk</span>
        <span>Audit</span>
        <span>Controls</span>
        <span>Secure</span>
      </div>
      <div class="footer-content">
        <p>&copy; {new Date().getFullYear()} {siteConfig.author.name}. All rights reserved.</p>
        <div class="footer-badges">
          <a href="https://astro.build/" target="_blank" rel="noopener noreferrer" class="badge">
            <span class="badge-label">Built with</span>
            <span class="badge-value astro">Astro</span>
          </a>
          <a href="./LICENSE" target="_blank" rel="noopener noreferrer" class="badge">
            <span class="badge-label">License</span>
            <span class="badge-value mit">MIT</span>
          </a>
          <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer" class="badge">
            <span class="badge-label">Hosted on</span>
            <span class="badge-value github-pages">GitHub Pages</span>
          </a>
          <!-- Add more badges here -->
        </div>
      </div>
    </footer>

    <div class="fixed-corner-controls">
      <ThemeSwitcher />
      <ScrollToTop />
    </div>
  </body>
</html>
