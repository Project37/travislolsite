---
// ThemeSwitcher.astro
// Extracted theme switcher component for selecting and persisting themes
import siteConfig from '../config/site.js';
---
<div style="display: flex; align-items: center; gap: 0.5rem; background-color: rgba(7,54,66,0.7); padding: 0.25rem 0.5rem; border-radius: 0.25rem;">
  <label for="theme-select" style="white-space: nowrap; font-size: 0.9rem;">Theme:</label>
  <select id="theme-select" style="font-size: 0.9rem;">
    {siteConfig.themes.map(theme => (
      <option value={theme.value}>{theme.name}</option>
    ))}
  </select>
</div>

<script>
  const select = document.getElementById('theme-select');
  const root = document.documentElement;
  function setTheme(theme) {
    root.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  }
  select.addEventListener('change', e => setTheme(e.target.value));
  // Initialize theme on load
  const saved = localStorage.getItem('theme');
  if (saved) {
    setTheme(saved);
    select.value = saved;
  } else {
    setTheme('gruvbox');
    select.value = 'gruvbox';
  }
</script>
